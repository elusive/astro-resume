---
import { getCollection } from 'astro:content';
import SocialLinks from './SocialLinks.astro';

const personal = (await getCollection('personal'))[0].data;
const socialLinks = (await getCollection('socials'))[0].data;

const lookingForWork = personal.resume_looking_for_work === 'yes';
---

<header class="text-center pt-8 pb-4 px-4 text-gray-900 dark:text-white relative">
    <div class="mx-auto">
        <img class="w-[95px] mx-auto rounded-[95px] overflow-hidden" src="public/portrait.jpg" alt="John"></img>
    </div>
    <h1 class="text-4xl sm:text-6xl font-bold mb-2">{personal.resume_name}</h1>
    <div class="flex flex-col sm:flex-row justify-between align-middle border-y-2 border-gray-400 pt-0 mb-2">
        <h2 class="inline-block text-3xl tracking-tight text-gray-600 dark:text-gray-300 py-2">{personal.resume_title}</h2>
        <p class="inline-block text-lg m-1 py-2">{personal.resume_email}</p>
        <div class="flex inline-block mx-1 py-2">
          <ul class="flex mx-auto space-x-2">
            {socialLinks.map((link) => (
              <li>
                <a href={link.url} target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline opacity-50 dark:opacity-100 hover:opacity-100">
                  <img src={link.icon} class="w-8 h-8" alt={link.url} />
                </a>
              </li>
            ))}
          </ul>
        </div>
    </div>
    <p class="max-w-3xl mx-auto text-md leading-relaxed text-justify pt-2 pb-4">
    {personal.resume_introduction}
  </p>

  {lookingForWork ? (
    <div class="mx-auto bg-green-500 text-white text-lg font-bold px-3 py-3">
      Actively looking for new opportunities
    </div>
  ) : (
    <div class="mx-auto my-4 bg-gray-400 text-white text-xl px-3 py-3">
      Not currently looking for new opportunities
    </div>
  )}

</header>
